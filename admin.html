<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>관리자</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
 
<h2>견적 목록</h2>
<table border="1" cellpadding="6">
<thead>
<tr>
<th>주문번호</th>
<th>고객명</th>
<th>연락처</th>
<th>이메일</th>
<th>금액</th>
<th>상태</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>

<script>

/* 단 한 번만 생성 */
if(!window._sb){
window._sb=window.supabase.createClient(
"https://ritzqnjgivmrtysulzil.supabase.co",
"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpdHpxbmpnaXZtcnR5c3VsemlsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5ODA2MjMsImV4cCI6MjA4NzU1NjYyM30.oTeXacJlkMXKw1G4IRWUa3G2DM1wPvFl-9rzf5IdsxY"
);
}

async function load(){
const {data}=await window._sb.from("quotes").select("*").order("created_at",{ascending:false});
const tbody=document.getElementById("list");
tbody.innerHTML="";
data.forEach(row=>{
const tr=document.createElement("tr");
tr.innerHTML=`
<td>${row.order_no}</td>
<td>${row.name}</td>
<td>${row.phone}</td>
<td>${row.email}</td>
<td>${row.total}</td>
<td>${row.status}</td>
`;
tbody.appendChild(tr);
});
}

load();

</script>
</body>
</html>
